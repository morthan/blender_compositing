JPEG 2000
^^^^^^^^^

При всех достоинствах классического JPEG некоторые его недостатки не давали
спокойно жить прогрессивной части общества. Особенно раздражали квадратики 8x8
пикселей, появляющиеся на изображении при высоких степенях сжатия. И вот через
некоторое время был разработан новый передовой формат JPEG 2000, в котором учли
недостатки предыдущего формата.

Новая версия JPEG вместо дискретного косинусного преобразования использовала
дискретное вейвлетное преобразованиеfootnote:[Идея дискретного вейвлетного
преобразования довольно красива и оригинальна, но оценить её сможет разве что
программист, писавший в своё время архиватор в качестве курсового проекта.
Интересующиеся могут почитать про это в Википедии (английский раздел подробнее),
а прочим рекомендую поверить мне на слово, что это круто!], а вместо обычного
кодирования по Хаффману -- продвинутое арифметическое кодирование, дающее более
высокую степень сжатия. (Вообще-то и классический JPEG мог бы использовать
арифметическое кодирование, но оно на тот момент было защищено патентом.)

Использование вейвлетов дало несколько важных преимуществ.

Во-первых, появилась возможность показывать изображение по мере его загрузки из
Интернета. В новом формате картинка хранится «слоями», каждый из которых
улучшает детализациюfootnote:[На самом деле не совсем так (см. Википедию про
вейвлеты), но для пользователя всё именно так и выглядит.]. Загрузили первый
слой -- появилось всё изображение целиком, но мутное и расплывчатое. Догрузился
второй -- качество улучшилось. И так далее. Если соединение медленное, то уже на
середине этого процесса можно решить, нужна ли вам эта картинка или лучше
прервать загрузку.

Во-вторых, стало можно отдельные (важные) части изображения кодировать без
потерь вообще, а остальную картинку -- с потерями. За это с радостью ухватились
производители фотоаппаратов. Теперь в фотоаппаратах появилась функция
автоматического определения лица. И на таких снимках 'лицо' кодировалось без
потери качества. Пользователи были в восторге, ибо на фотографиях в первую
очередь всех интересует лицо, а на костюм, сжатый с потерями, особого внимания
никто не обращает.

В-третьих, сжатие было получше классического JPEG. И, наконец, исчезли
раздражающие квадратики! Теперь ярко выраженных артефактов на картинке уже не
было (вейвлетные артефакты проявляются в виде лёгкой размытости контуров).

Формат получился замечательный, но по инерции все продолжают пользоваться
обычным JPEG. Когда-нибудь в будущем, когда все браузеры научатся его понимать,
JPEG 2000 начнёт своё триумфальное шествие по планете. Если, конечно, к тому
времени не придумают что-то получше.
