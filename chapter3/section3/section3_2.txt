Последовательности
~~~~~~~~~~~~~~~~~~

Как я уже говорил ранее, этот термин обычно передаётся калькой с английского
«секвенции». Мне это слово режет слух, так что здесь я вместо него буду
использовать термин «последовательности», тем более что по смыслу он всё равно
подходит.

Итак, если в нашем видеоролике каждый кадр сохранить в файл (обычно используются
PNG или JPEG, но возможны варианты в зависимости от задачи) с именем,
соответствующим номеру кадра, а потом скинуть все эти 'N' файлов в папочку, то
они будут представлять собой 'последовательность'. И Blender позволяет
использовать её вместо видеоролика в процессе композитинга.

В чём смысл использования последовательностей вместо обычного ролика (AVI там,
или MPEG)? Казалось бы, с одним файлом работать удобнее, чем с тысячей; к тому
же последовательность сплошь и рядом занимает больше места, нежели обычный
ролик.

Правильно заданный вопрос уже содержит в себе половину ответа. Бывают ситуации,
когда тысяча файлов гораздо удобнее одного большого. Представьте себе, что вам
нужно отрендерить что-нибудь 'большое': какую-нибудь анимацию, которую Blender
будет молотить пару суток. И вот, если за эти двое суток что-нибудь зависнет или
слетит (да хотя бы и свет мигнёт!), то в случае рендеринга видеофайла вы
потеряете всё, нажитое непосильным трудом. Будьте любезны начинать с начала и
ещё двое суток молиться, чтобы в этот раз всё прошло без сбоев!

А в случае использования последовательности вы потеряете только один кадр --
последний. И сможете продолжить рендеринг с того места, на котором остановились.
Об этом, а также многом другом (в частности, как устроить самодельную
рендер-ферму из нескольких ПК) вы узнаете в главе, посвящённой рендерингу, а
пока достаточно знать, что такая возможность существует.

Да, последовательности часто занимают места больше, чем видеоролик. Вопрос:
почему? Правильный ответ: за счёт сохранения 'качества'. Преобразовать
последовательность в единый видеоролик вы успеете всегда, а промежуточные работы
лучше проводить на последовательностях, так меньше будут потери качества.

Любой ролик можно достаточно легко разложить на кадры, превратив его тем самым в
последовательность. Рассмотрим эту процедуру на практике, взяв для примера мой
маленький ролик с панорамой, открывающейся с пещерного города Чуфут-Кале.

Первым делом выписываем на бумажку свойства видеоролика, подсмотренные мной в
*VLC Player* (другие проигрыватели, по идее, тоже должны как-то отображать
размер кадра и скорость воспроизведения). Рамер кадра у нас равен 800x600
пикселей, скорость воспроизведения -- 25 кадров в секунду.

Теперь запускаем Blender и настраиваем в панели *Format* параметры так, чтобы
они соответствовали видеоролику. Размер кадра 800x600, 25 кадров в секунду, а
сохранять последовательность мы будем в формате JPEG.

image:img/figure3_8.png[]

*Рисунок 3.8* 'Параметры видеоролика'

Продолжаем. Переключаемся на раскладку экрана *Sequence*, вызываем пункт меню
*Add* -> *Movie*. В появившемся окне выбора файлов находим *chufut_kale.avi* и
открываем его. Подводим мышку к нулевому кадру (там где вертикальная зелёная
линия) и фиксируем ролик нажатием левой кнопки мыши.

image:img/figure3_9.png[]

*Рисунок 3.9* 'Видеоредактор Blender с загруженным роликом'

Настраиваем оставшиеся параметры. В панели *Output* выбираем папку, куда будет
сохраняться наша последовательность. В моём случае это `d:\chufutka`. Обратите
внимание на то, как задан шаблон имени файла: `chufutka###`. Символы `###`
показывают место, куда будет подставляться номер кадра, и количество разрядов,
выделяемых под него. Если бы шаблон имени файла не был задан (то есть содержимое
поля выглядело так: `d:\chufutka\`), то имя файла соответствовало бы просто
номеру кадра без каких-либо добавлений.

image:img/figure3_10.png[]

*Рисунок 3.10* 'Настройка параметров вывода последовательности'

Переходим в панель *Anim* и нажимаем кнопку *Do Sequence*. Это даёт Blender
понять, что данные для рендеринга следует брать не из 3D-сцены, а из редактора
видео. Наш ролик занимает 750 кадров, так что исправляем значение поля *End*
соответствующим образом.

Всё, настройки закончены. Нажимаем большую кнопку *ANIM* и ждём окончания
процесса. Если кому интересно, сколько кадров ещё осталось, можете заглянуть в
консоль: там указывается номер текущего кадра.

После окончания процесса в папке `d:\chufutka` находятся 750 файлов, каждый из
которых соответствует отдельному кадру видео. Как именно с ними работать мы
узнаем позже, в главе, посвящённой редактору видео.
